(function(){"use strict";function a(a,b,c,d,e,f){return{tag:a,key:b,attrs:c,children:d,text:e,dom:f,domSize:void 0,state:void 0,events:void 0,instance:void 0}}function b(a){for(var b in a)if(i.call(a,b))return!1;return!0}function c(a){for(var b,c="div",d=[],e={};b=g.exec(a);){var f=b[1],i=b[2];if(""===f&&""!==i)c=i;else if("#"===f)e.id=i;else if("."===f)d.push(i);else if("["===b[3][0]){var j=b[6];j&&(j=j.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===b[4]?d.push(j):e[b[4]]=""===j?j:j||!0}}return 0<d.length&&(e.className=d.join(" ")),h[a]={tag:c,attrs:e}}function d(c,d){var e=d.attrs,f=a.normalizeChildren(d.children),g=i.call(e,"class"),h=g?e.class:e.className;if(d.tag=c.tag,d.attrs=null,d.children=void 0,!b(c.attrs)&&!b(e)){var j={};for(var k in e)i.call(e,k)&&(j[k]=e[k]);e=j}for(var k in c.attrs)i.call(c.attrs,k)&&"className"!==k&&!i.call(e,k)&&(e[k]=c.attrs[k]);for(var k in(null!=h||null!=c.attrs.className)&&(e.className=null==h?null==c.attrs.className?null:c.attrs.className:null==c.attrs.className?h:c.attrs.className+" "+(h+"")),g&&(e.class=null),e)if(i.call(e,k)&&"key"!==k){d.attrs=e;break}return Array.isArray(f)&&1===f.length&&null!=f[0]&&"#"===f[0].tag?d.text=f[0].children:d.children=f,d}function e(b){if(null==b||"string"!=typeof b&&"function"!=typeof b&&"function"!=typeof b.view)throw Error("The selector must be either a string or a component.");var e=f.apply(1,arguments);return"string"==typeof b&&(e.children=a.normalizeChildren(e.children),"["!==b)?d(h[b]||c(b),e):(e.tag=b,e)}a.normalize=function(b){return Array.isArray(b)?a("[",void 0,void 0,a.normalizeChildren(b),void 0,void 0):null==b||"boolean"==typeof b?null:"object"==typeof b?b:a("#",void 0,void 0,b+"",void 0,void 0)},a.normalizeChildren=function(b){var c=[];if(b.length){for(var d=null!=b[0]&&null!=b[0].key,e=1;e<b.length;e++)if((null!=b[e]&&null!=b[e].key)!==d)throw TypeError("Vnodes must either always have keys or never have keys!");for(var e=0;e<b.length;e++)c[e]=a.normalize(b[e])}return c};var f=function(){var b,c=arguments[this],d=this+1;if(null==c?c={}:("object"!=typeof c||null!=c.tag||Array.isArray(c))&&(c={},d=this),arguments.length===d+1)b=arguments[d],Array.isArray(b)||(b=[b]);else for(b=[];d<arguments.length;)b.push(arguments[d++]);return a("",c.key,c,b)},g=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,h={},i={}.hasOwnProperty;e.trust=function(b){return null==b&&(b=""),a("<",void 0,void 0,b,void 0,void 0)},e.fragment=function(){var b=f.apply(0,arguments);return b.tag="[",b.children=a.normalizeChildren(b.children),b};var j=function(b){function c(a){return a.attrs&&a.attrs.xmlns||Z[a.tag]}function d(a,b){if(a.state!==b)throw Error("`vnode.state` must not be modified")}function e(a){var b=a.state;try{return this.apply(b,arguments)}finally{d(a,b)}}function f(){try{return Y.activeElement}catch(a){return null}}function g(a,b,c,d,e,f,g){for(var j,k=c;k<d;k++)j=b[k],null!=j&&h(a,j,e,g,f)}function h(a,b,c,d,e){var f=b.tag;"string"==typeof f?(b.state={},null!=b.attrs&&U(b.attrs,b,c),"#"===f?i(a,b,e):"<"===f?j(a,b,d,e):"["===f?k(a,b,c,d,e):l(a,b,c,d,e)):n(a,b,c,d,e)}function i(a,b,c){b.dom=Y.createTextNode(b.children),A(a,b.dom,c)}function j(a,b,c,d){var e=b.children.match(/^\s*?<(\w+)/im)||[],f=Y.createElement($[e[1]]||"div");"http://www.w3.org/2000/svg"===c?(f.innerHTML="<svg xmlns=\"http://www.w3.org/2000/svg\">"+b.children+"</svg>",f=f.firstChild):f.innerHTML=b.children,b.dom=f.firstChild,b.domSize=f.childNodes.length,b.instance=[];for(var g,h=Y.createDocumentFragment();g=f.firstChild;)b.instance.push(g),h.appendChild(g);A(a,h,d)}function k(a,b,c,d,e){var f=Y.createDocumentFragment();if(null!=b.children){var h=b.children;g(f,h,0,h.length,c,null,d)}b.dom=f.firstChild,b.domSize=f.childNodes.length,A(a,f,e)}function l(b,d,e,f,h){var i=d.tag,j=d.attrs,k=j&&j.is;f=c(d)||f;var l=f?k?Y.createElementNS(f,i,{is:k}):Y.createElementNS(f,i):k?Y.createElement(i,{is:k}):Y.createElement(i);if(d.dom=l,null!=j&&H(d,j,f),A(b,l,h),!B(d)&&(null!=d.text&&(""===d.text?d.children=[a("#",void 0,void 0,d.text,void 0,void 0)]:l.textContent=d.text),null!=d.children)){var m=d.children;g(l,m,0,m.length,e,null,f),"select"===d.tag&&null!=j&&K(d,j)}}function m(b,c){var d;if("function"==typeof b.tag.view){if(b.state=Object.create(b.tag),d=b.state.view,null!=d.$$reentrantLock$$)return;d.$$reentrantLock$$=!0}else{if(b.state=void 0,d=b.tag,null!=d.$$reentrantLock$$)return;d.$$reentrantLock$$=!0,b.state=null!=b.tag.prototype&&"function"==typeof b.tag.prototype.view?new b.tag(b):b.tag(b)}if(U(b.state,b,c),null!=b.attrs&&U(b.attrs,b,c),b.instance=a.normalize(e.call(b.state.view,b)),b.instance===b)throw Error("A view cannot return the vnode it received as argument");d.$$reentrantLock$$=null}function n(a,b,c,d,e){m(b,c),null==b.instance?b.domSize=0:(h(a,b.instance,c,d,e),b.dom=b.instance.dom,b.domSize=null==b.dom?0:b.instance.domSize)}function o(a,b,c,d,e,f){if(b!==c&&(null!=b||null!=c))if(null==b||0===b.length)g(a,c,0,c.length,d,e,f);else if(null==c||0===c.length)C(a,b,0,b.length);else{var j=null!=b[0]&&null!=b[0].key,k=null!=c[0]&&null!=c[0].key,l=0,m=0;if(!j)for(;m<b.length&&null==b[m];)m++;if(!k)for(;l<c.length&&null==c[l];)l++;if(null===k&&null==j)return;if(j!==k)C(a,b,m,b.length),g(a,c,l,c.length,d,e,f);else if(!k){var n=b.length<c.length?b.length:c.length;for(l=l<m?l:m;l<n;l++)if(r=b[l],s=c[l],r===s||null==r&&null==s)continue;else null==r?h(a,s,d,f,x(b,l+1,e)):null==s?D(a,r):p(a,r,s,d,x(b,l+1,e),f);b.length>n&&C(a,b,l,b.length),c.length>n&&g(a,c,l,c.length,d,e,f)}else{for(var q,r,s,t,u,z,A=b.length-1,B=c.length-1;A>=m&&B>=l&&(t=b[A],u=c[B],t.key===u.key);)t!==u&&p(a,t,u,d,e,f),null!=u.dom&&(e=u.dom),A--,B--;for(;A>=m&&B>=l&&(r=b[m],s=c[l],r.key===s.key);)m++,l++,r!==s&&p(a,r,s,d,x(b,m,e),f);for(;A>=m&&B>=l&&l!==B&&r.key===u.key&&t.key===s.key;)z=x(b,m,e),y(a,t,z),t!==s&&p(a,t,s,d,z,f),++l<=--B&&y(a,r,e),r!==u&&p(a,r,u,d,e,f),null!=u.dom&&(e=u.dom),m++,A--,t=b[A],u=c[B],r=b[m],s=c[l];for(;A>=m&&B>=l&&t.key===u.key;)t!==u&&p(a,t,u,d,e,f),null!=u.dom&&(e=u.dom),A--,B--,t=b[A],u=c[B];if(l>B)C(a,b,m,A+1);else if(m>A)g(a,c,l,B+1,d,e,f);else{var q,E,F=e,G=B-l+1,H=Array(G),I=0,J=0,K=2147483647,L=0;for(J=0;J<G;J++)H[J]=-1;for(J=B;J>=l;J--){null==q&&(q=v(b,m,A+1)),u=c[J];var M=q[u.key];null!=M&&(K=M<K?M:-1,H[J-l]=M,t=b[M],b[M]=null,t!==u&&p(a,t,u,d,e,f),null!=u.dom&&(e=u.dom),L++)}if(e=F,L!=A-m+1&&C(a,b,m,A+1),0==L)g(a,c,l,B+1,d,e,f);else if(-1===K)for(E=w(H),I=E.length-1,J=B;J>=l;J--)s=c[J],-1===H[J-l]?h(a,s,d,f,e):E[I]===J-l?I--:y(a,s,e),null!=s.dom&&(e=c[J].dom);else for(J=B;J>=l;J--)s=c[J],-1===H[J-l]&&h(a,s,d,f,e),null!=s.dom&&(e=c[J].dom)}}}}function p(a,b,c,d,e,f){var g=b.tag,i=c.tag;if(g===i){if(c.state=b.state,c.events=b.events,W(c,b))return;"string"==typeof g?(null!=c.attrs&&V(c.attrs,c,d),"#"===g?q(b,c):"<"===g?r(a,b,c,f,e):"["===g?s(a,b,c,d,e,f):t(b,c,d,f)):u(a,b,c,d,e,f)}else D(a,b),h(a,c,d,f,e)}function q(a,b){a.children.toString()!==b.children.toString()&&(a.dom.nodeValue=b.children),b.dom=a.dom}function r(a,b,c,d,e){b.children===c.children?(c.dom=b.dom,c.domSize=b.domSize,c.instance=b.instance):(E(a,b),j(a,c,d,e))}function s(a,b,c,d,e,f){o(a,b.children,c.children,d,e,f);var g=0,h=c.children;if(c.dom=null,null!=h){for(var j,k=0;k<h.length;k++)j=h[k],null!=j&&null!=j.dom&&(null==c.dom&&(c.dom=j.dom),g+=j.domSize||1);1!==g&&(c.domSize=g)}}function t(b,d,e,f){var g=d.dom=b.dom;f=c(d)||f,"textarea"===d.tag&&(null==d.attrs&&(d.attrs={}),null!=d.text&&(d.attrs.value=d.text,d.text=void 0)),L(d,b.attrs,d.attrs,f),B(d)||(null!=b.text&&null!=d.text&&""!==d.text?b.text.toString()!==d.text.toString()&&(b.dom.firstChild.nodeValue=d.text):(null!=b.text&&(b.children=[a("#",void 0,void 0,b.text,void 0,b.dom.firstChild)]),null!=d.text&&(d.children=[a("#",void 0,void 0,d.text,void 0,void 0)]),o(g,b.children,d.children,e,null,f)))}function u(b,c,d,f,g,i){if(d.instance=a.normalize(e.call(d.state.view,d)),d.instance===d)throw Error("A view cannot return the vnode it received as argument");V(d.state,d,f),null!=d.attrs&&V(d.attrs,d,f),null==d.instance?null==c.instance?(d.dom=c.dom,d.domSize=c.domSize):(D(b,c.instance),d.dom=void 0,d.domSize=0):(null==c.instance?h(b,d.instance,f,i,g):p(b,c.instance,d.instance,f,g,i),d.dom=d.instance.dom,d.domSize=d.instance.domSize)}function v(a,b,c){for(var d,e=Object.create(null);b<c;b++)if(d=a[b],null!=d){var f=d.key;null!=f&&(e[f]=b)}return e}function w(b){for(var a=[0],d=0,e=0,f=0,g=_.length=b.length,f=0;f<g;f++)_[f]=b[f];for(var f=0;f<g;++f)if(-1!==b[f]){var h=a[a.length-1];if(b[h]<b[f]){_[f]=h,a.push(f);continue}for(d=0,e=a.length-1;d<e;){var j=(d>>>1)+(e>>>1)+(1&(d&e));b[a[j]]<b[f]?d=j+1:e=j}b[f]<b[a[d]]&&(0<d&&(_[f]=a[d-1]),a[d]=f)}for(d=a.length,e=a[d-1];0<d--;)a[d]=e,e=_[e];return _.length=0,a}function x(a,b,c){for(;b<a.length;b++)if(null!=a[b]&&null!=a[b].dom)return a[b].dom;return c}function y(a,b,c){var d=Y.createDocumentFragment();z(a,d,b),A(a,d,c)}function z(a,b,c){for(;null!=c.dom&&c.dom.parentNode===a;){if("string"!=typeof c.tag){if(c=c.instance,null!=c)continue;}else if("<"===c.tag)for(var d=0;d<c.instance.length;d++)b.appendChild(c.instance[d]);else if("["!==c.tag)b.appendChild(c.dom);else if(1!==c.children.length)for(var e,d=0;d<c.children.length;d++)e=c.children[d],null!=e&&z(a,b,e);else if(c=c.children[0],null!=c)continue;break}}function A(a,b,c){null==c?a.appendChild(b):a.insertBefore(b,c)}function B(a){if(null==a.attrs||null==a.attrs.contenteditable&&null==a.attrs.contentEditable)return!1;var b=a.children;if(null!=b&&1===b.length&&"<"===b[0].tag){var c=b[0].children;a.dom.innerHTML!==c&&(a.dom.innerHTML=c)}else if(null!=a.text||null!=b&&0!==b.length)throw Error("Child node of a contenteditable must be trusted");return!0}function C(a,b,c,d){for(var e,f=c;f<d;f++)e=b[f],null!=e&&D(a,e)}function D(a,b){function c(){d(b,i),G(b),F(a,b)}var f,g,h=0,i=b.state;if("string"!=typeof b.tag&&"function"==typeof b.state.onbeforeremove){var j=e.call(b.state.onbeforeremove,b);null!=j&&"function"==typeof j.then&&(h=1,f=j)}if(b.attrs&&"function"==typeof b.attrs.onbeforeremove){var j=e.call(b.attrs.onbeforeremove,b);null!=j&&"function"==typeof j.then&&(h|=2,g=j)}if(d(b,i),!h)G(b),F(a,b);else{if(null!=f){var k=function(){1&h&&(h&=2,!h&&c())};f.then(k,k)}if(null!=g){var k=function(){2&h&&(h&=1,!h&&c())};g.then(k,k)}}}function E(a,b){for(var c=0;c<b.instance.length;c++)a.removeChild(b.instance[c])}function F(a,b){for(;null!=b.dom&&b.dom.parentNode===a;){if("string"!=typeof b.tag){if(b=b.instance,null!=b)continue;}else if("<"===b.tag)E(a,b);else{if("["!==b.tag&&(a.removeChild(b.dom),!Array.isArray(b.children)))break;if(1!==b.children.length)for(var c,d=0;d<b.children.length;d++)c=b.children[d],null!=c&&F(a,c);else if(b=b.children[0],null!=b)continue}break}}function G(a){if("string"!=typeof a.tag&&"function"==typeof a.state.onremove&&e.call(a.state.onremove,a),a.attrs&&"function"==typeof a.attrs.onremove&&e.call(a.attrs.onremove,a),"string"!=typeof a.tag)null!=a.instance&&G(a.instance);else{var b=a.children;if(Array.isArray(b))for(var c,d=0;d<b.length;d++)c=b[d],null!=c&&G(c)}}function H(a,b,c){for(var d in b)I(a,d,null,b[d],c)}function I(a,b,c,d,e){if("key"!==b&&"is"!==b&&null!=d&&!N(b)&&(c!==d||M(a,b)||"object"==typeof d)){if("o"===b[0]&&"n"===b[1])return T(a,b,d);if("xlink:"===b.substring(0,6))a.dom.setAttributeNS("http://www.w3.org/1999/xlink",b.substring(6),d);else if("style"===b)R(a.dom,c,d);else if(O(a,b,e)){if("value"===b){if(("input"===a.tag||"textarea"===a.tag)&&a.dom.value===""+d&&a.dom===f())return;if("select"===a.tag&&null!==c&&a.dom.value===""+d)return;if("option"===a.tag&&null!==c&&a.dom.value===""+d)return}"input"===a.tag&&"type"===b?a.dom.setAttribute(b,d):a.dom[b]=d}else"boolean"==typeof d?d?a.dom.setAttribute(b,""):a.dom.removeAttribute(b):a.dom.setAttribute("className"===b?"class":b,d)}}function J(a,b,c,d){if(!("key"===b||"is"===b||null==c||N(b)))if("o"===b[0]&&"n"===b[1]&&!N(b))T(a,b,void 0);else if("style"===b)R(a.dom,c,null);else if(O(a,b,d)&&"className"!==b&&("value"!==b||"option"!==a.tag&&("select"!==a.tag||-1!==a.dom.selectedIndex||a.dom!==f()))&&("input"!==a.tag||"type"!==b))a.dom[b]=null;else{var e=b.indexOf(":");-1!==e&&(b=b.slice(e+1)),!1!==c&&a.dom.removeAttribute("className"===b?"class":b)}}function K(a,b){if("value"in b)if(null===b.value)-1!==a.dom.selectedIndex&&(a.dom.value=null);else{var c=""+b.value;(a.dom.value!==c||-1===a.dom.selectedIndex)&&(a.dom.value=c)}"selectedIndex"in b&&I(a,"selectedIndex",null,b.selectedIndex,void 0)}function L(a,b,c,d){if(null!=c)for(var e in c)I(a,e,b&&b[e],c[e],d);var f;if(null!=b)for(var e in b)null!=(f=b[e])&&(null==c||null==c[e])&&J(a,e,f,d)}function M(a,b){return"value"===b||"checked"===b||"selectedIndex"===b||"selected"===b&&a.dom===f()||"option"===a.tag&&a.dom.parentNode===Y.activeElement}function N(a){return"oninit"===a||"oncreate"===a||"onupdate"===a||"onremove"===a||"onbeforeremove"===a||"onbeforeupdate"===a}function O(a,b,c){return void 0===c&&(-1<a.tag.indexOf("-")||null!=a.attrs&&a.attrs.is||"href"!==b&&"list"!==b&&"form"!==b&&"width"!==b&&"height"!==b)&&b in a.dom}function P(a){return"-"+a.toLowerCase()}function Q(a){return"-"===a[0]&&"-"===a[1]?a:"cssFloat"===a?"float":a.replace(aa,P)}function R(a,b,c){if(b===c);else if(null==c)a.style.cssText="";else if("object"!=typeof c)a.style.cssText=c;else if(null==b||"object"!=typeof b)for(var d in a.style.cssText="",c){var e=c[d];null!=e&&a.style.setProperty(Q(d),e+"")}else{for(var d in c){var e=c[d];null!=e&&(e+="")!==b[d]+""&&a.style.setProperty(Q(d),e)}for(var d in b)null!=b[d]&&null==c[d]&&a.style.removeProperty(Q(d))}}function S(){this._=X}function T(a,b,c){if(null!=a.events){if(a.events[b]===c)return;null!=c&&("function"==typeof c||"object"==typeof c)?(null==a.events[b]&&a.dom.addEventListener(b.substring(2),a.events,!1),a.events[b]=c):(null!=a.events[b]&&a.dom.removeEventListener(b.substring(2),a.events,!1),a.events[b]=void 0)}else null!=c&&("function"==typeof c||"object"==typeof c)&&(a.events=new S,a.dom.addEventListener(b.substring(2),a.events,!1),a.events[b]=c)}function U(a,b,c){"function"==typeof a.oninit&&e.call(a.oninit,b),"function"==typeof a.oncreate&&c.push(e.bind(a.oncreate,b))}function V(a,b,c){"function"==typeof a.onupdate&&c.push(e.bind(a.onupdate,b))}function W(a,b){do{if(null!=a.attrs&&"function"==typeof a.attrs.onbeforeupdate){var c=e.call(a.attrs.onbeforeupdate,a,b);if(void 0!==c&&!c)break}if("string"!=typeof a.tag&&"function"==typeof a.state.onbeforeupdate){var c=e.call(a.state.onbeforeupdate,a,b);if(void 0!==c&&!c)break}return!1}while(!1);return a.dom=b.dom,a.domSize=b.domSize,a.instance=b.instance,a.attrs=b.attrs,a.children=b.children,a.text=b.text,!0}var X,Y=b&&b.document,Z={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},$={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"},_=[],aa=/[A-Z]/g;return S.prototype=Object.create(null),S.prototype.handleEvent=function(a){var b,c=this["on"+a.type];"function"==typeof c?b=c.call(a.currentTarget,a):"function"==typeof c.handleEvent&&c.handleEvent(a),this._&&!1!==a.redraw&&(0,this._)(),!1===b&&(a.preventDefault(),a.stopPropagation())},function(b,c,d){if(!b)throw TypeError("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var e=[],g=f(),h=b.namespaceURI;null==b.vnodes&&(b.textContent=""),c=a.normalizeChildren(Array.isArray(c)?c:[c]);var j=X;try{X="function"==typeof d?d:void 0,o(b,b.vnodes,c,e,null,"http://www.w3.org/1999/xhtml"===h?void 0:h)}finally{X=j}b.vnodes=c,null!=g&&f()!==g&&"function"==typeof g.focus&&g.focus();for(var k=0;k<e.length;k++)e[k]()}}(window),k=function(b,c,d){function e(){if(h)throw Error("Nested m.redraw.sync() call");h=!0;for(var c=0;c<g.length;c+=2)try{b(g[c],a(g[c+1]),f)}catch(a){d.error(a)}h=!1}function f(){i||(i=!0,c(function(){i=!1,e()}))}var g=[],h=!1,i=!1;return f.sync=e,{mount:function(c,d){if(null!=d&&null==d.view&&"function"!=typeof d)throw TypeError("m.mount(element, component) expects a component, not a vnode");var e=g.indexOf(c);0<=e&&(g.splice(e,2),b(c,[],f)),null!=d&&(g.push(c,d),b(c,a(d),f))},redraw:f}}(j,requestAnimationFrame,console),l=Object.assign||function(a,b){b&&Object.keys(b).forEach(function(c){a[c]=b[c]})},n=k,o=function(){return e.apply(this,arguments)};o.m=e,o.trust=e.trust,o.fragment=e.fragment,o.mount=n.mount;o.render=j,o.redraw=n.redraw,o.vnode=a,window.m=o})();
